<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Aero-elastic Turbine Example &mdash; FUSED-Wind  documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.1.0/cerulean/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="FUSED-Wind  documentation" href="index.html" />
    <link rel="up" title="Turbine Tutorials" href="turbine_ex.html" />
    <link rel="next" title="Developer Guide" href="developer_guide.html" />
    <link rel="prev" title="Airfoil and Blade Geometry Examples" href="turbine_structure_ex.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          FUSED-Wind</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="news.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="about_fusedwind.html">Software Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorial.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Source Documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Aero-elastic Turbine Example</a></li>
<li><a class="reference internal" href="#coupled-structural-aero-elastic-turbine-example">Coupled Structural Aero-elastic Turbine Example</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="turbine_structure_ex.html" title="Previous Chapter: Airfoil and Blade Geometry Examples"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Airfoil and Blad...</span>
    </a>
  </li>
  <li>
    <a href="developer_guide.html" title="Next Chapter: Developer Guide"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Developer Guide &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<div class="">
<h3>Versions</h3>

<div class="list-group">
  <a href="https://github.com/FUSED-Wind/fusedwind" target="_blank" class="list-group-item">
    <h4 class="list-group-item-heading">Development</h4>
    <p class="list-group-item-text" href="https://github.com/FUSED-Wind/fusedwind">0.1.dev Github</p>
  </a>
  <a href="installation.html" target="_blank" class="list-group-item">
    <h4 class="list-group-item-heading">Stable</h4>
    <p class="list-group-item-text" href="https://github.com/FUSED-Wind/fusedwind">Coming soon!</p>
  </a>
</div>

</div>


<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<h3>Contents</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="news.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="about_fusedwind.html">Software Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorial.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Source Documentation</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="aero-elastic-turbine-example">
<h1>Aero-elastic Turbine Example<a class="headerlink" href="#aero-elastic-turbine-example" title="Permalink to this headline">Â¶</a></h1>
<p>This example shows the basics of how to connect a parameterized geometric definition of a wind turbine blade planform to the inputs of an aeroelastic solver.
The example is located in <tt class="docutils literal"><span class="pre">src/fusedwind/examples/turbine/aeroelastic_turbine.py</span></tt>.</p>
<p>The overall turbine geometry and beam properties are defined in the <tt class="docutils literal"><span class="pre">fusedwind.turbine.turbine_vt.AeroelasticHAWTVT</span></tt> variable tree.
This variable tree needs to be an input to an aeroelastic solver wrapper, and is currently the only requirement.
For optimization contexts you will need some parameterization of the blade geometry and if you choose to use the one supplied in FUSED-Wind, hooking up the solver with this geometric definition is easy.</p>
<p>The first step is to write a wrapper for an aeroelastic code.
In the example we have made a dummy component that implements the AeroElasticSolverBase interface and otherwise does nothing.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Assembly</span><span class="p">,</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">VarTree</span>

<span class="kn">from</span> <span class="nn">fusedwind.interface</span> <span class="kn">import</span> <span class="n">implement_base</span>
<span class="kn">from</span> <span class="nn">fusedwind.turbine.aeroelastic_solver</span> <span class="kn">import</span> <span class="n">AeroElasticSolverBase</span>
<span class="kn">from</span> <span class="nn">fusedwind.turbine.turbine_vt</span> <span class="kn">import</span> <span class="n">configure_turbine</span><span class="p">,</span> <span class="n">AeroelasticHAWTVT</span>
<span class="kn">from</span> <span class="nn">fusedwind.turbine.geometry</span> <span class="kn">import</span> <span class="n">SplinedBladePlanform</span><span class="p">,</span> <span class="n">read_blade_planform</span>


<span class="nd">@implement_base</span><span class="p">(</span><span class="n">AeroElasticSolverBase</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AEsolver</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="n">wt</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">AeroelasticHAWTVT</span><span class="p">(),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">print</span> <span class="s">&#39;run some analysis here&#39;</span>
</pre></div>
</div>
<p>Then we instantiate the assembly we want to run our analysis in and add an instance of the <tt class="docutils literal"><span class="pre">fusedwind.turbine.geometry.SplinedBladePlanform</span></tt> class which adds an FFD spline to each of the planform curves.
Secondly, we add our new aeroelastic solver.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">top</span> <span class="o">=</span> <span class="n">Assembly</span><span class="p">()</span>

<span class="c"># add splined planform description</span>
<span class="n">top</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;pf_splines&#39;</span><span class="p">,</span> <span class="n">SplinedBladePlanform</span><span class="p">())</span>
<span class="n">top</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;pf_splines&#39;</span><span class="p">)</span>

<span class="n">top</span><span class="o">.</span><span class="n">pf_splines</span><span class="o">.</span><span class="n">blade_length</span> <span class="o">=</span> <span class="mf">86.366</span>
<span class="n">top</span><span class="o">.</span><span class="n">pf_splines</span><span class="o">.</span><span class="n">pfIn</span> <span class="o">=</span> <span class="n">read_blade_planform</span><span class="p">(</span><span class="s">&#39;data/DTU_10MW_RWT_blade_axis_prebend.dat&#39;</span><span class="p">)</span>

<span class="c"># add aeroelastic solver</span>
<span class="n">top</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;ae&#39;</span><span class="p">,</span> <span class="n">AEsolver</span><span class="p">())</span>
<span class="n">top</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;ae&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the next step we then configure this turbine.
The <tt class="docutils literal"><span class="pre">fusedwind.turbine.turbine_vt.configure_turbine</span></tt> method configures the <tt class="docutils literal"><span class="pre">AeroelasticHAWTVT</span></tt> variable tree as a standard three bladed turbine with a tower, tower top, shaft, hub and blades.
Each of these are a <tt class="docutils literal"><span class="pre">MainBody</span></tt> variable tree, which defines the body&#8217;s geometric and structural properties.
The overall dimensions of the turbine are then specified, which in this case corresponds to the DTU 10MW RWT.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># configure the turbine with standard sub-components</span>
<span class="n">configure_turbine</span><span class="p">(</span><span class="n">top</span><span class="o">.</span><span class="n">ae</span><span class="o">.</span><span class="n">wt</span><span class="p">)</span>

<span class="c"># define overall dimensions</span>
<span class="n">wt</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">ae</span><span class="o">.</span><span class="n">wt</span>
<span class="n">wt</span><span class="o">.</span><span class="n">turbine_name</span> <span class="o">=</span> <span class="s">&#39;DTU 10MW RWT&#39;</span>
<span class="n">wt</span><span class="o">.</span><span class="n">doc</span> <span class="o">=</span> <span class="s">&#39;FUSED-Wind definition of the DTU 10MW RWT&#39;</span>
<span class="n">wt</span><span class="o">.</span><span class="n">tower_height</span> <span class="o">=</span> <span class="mf">115.63</span>
<span class="n">wt</span><span class="o">.</span><span class="n">hub_height</span> <span class="o">=</span> <span class="mf">119.0</span>
<span class="n">wt</span><span class="o">.</span><span class="n">towertop_height</span> <span class="o">=</span> <span class="mf">2.75</span>
<span class="n">wt</span><span class="o">.</span><span class="n">shaft_length</span> <span class="o">=</span> <span class="mf">7.1</span>
<span class="n">wt</span><span class="o">.</span><span class="n">tilt_angle</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">wt</span><span class="o">.</span><span class="n">cone_angle</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.5</span>
<span class="n">wt</span><span class="o">.</span><span class="n">hub_radius</span> <span class="o">=</span> <span class="mf">2.8</span>
<span class="n">wt</span><span class="o">.</span><span class="n">blade_length</span> <span class="o">=</span> <span class="mf">86.366</span>
<span class="n">wt</span><span class="o">.</span><span class="n">rotor_diameter</span> <span class="o">=</span> <span class="mf">178.332</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">wt</span><span class="o">.</span><span class="n">set_machine_type</span><span class="p">(</span><span class="s">&#39;VarSpeedVarPitch&#39;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">vIn</span> <span class="o">=</span> <span class="mf">3.</span>
<span class="n">c</span><span class="o">.</span><span class="n">vOut</span> <span class="o">=</span> <span class="mf">25.</span>
<span class="n">c</span><span class="o">.</span><span class="n">minOmega</span> <span class="o">=</span> <span class="mf">6.</span>
<span class="n">c</span><span class="o">.</span><span class="n">maxOmega</span> <span class="o">=</span> <span class="mf">9.6</span>
<span class="n">c</span><span class="o">.</span><span class="n">minPitch</span> <span class="o">=</span> <span class="mf">0.</span>
</pre></div>
</div>
<p>The final configuration step is to link the splined geometry to the blade geometry of the turbine definition in the aeroelastic solver.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># connect the splined planform to the blade geometry vartree</span>
<span class="c"># in the aeroelastic solver</span>
<span class="n">top</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;pf_splines.pfOut&#39;</span><span class="p">,</span> <span class="s">&#39;ae.wt.blade1.geom&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And all that remains is to run the assembly which in this case is not so eventful.</p>
</div>
<div class="section" id="coupled-structural-aero-elastic-turbine-example">
<h1>Coupled Structural Aero-elastic Turbine Example<a class="headerlink" href="#coupled-structural-aero-elastic-turbine-example" title="Permalink to this headline">Â¶</a></h1>
<p>In this example, we extend the above example to also interface to to a structural model capable of computing the mass and stiffness beam properties of the blade, that is a required input to most aeroelastic solvers, e.g. FAST and HAWC2.
The aim with this is to have the capability of <em>simultaneously</em> optimize the structural and aerodynamic design of a blade.</p>
<p>The example combines the example explaining the blade structural parameterization with the above example of interfacing an aeroelastic solver.
The example is located in <tt class="docutils literal"><span class="pre">src/fusedwind/examples/turbine/aerostructural_turbine.py</span></tt>.</p>
<p>The first step is to define our solvers, which is now both an aeroelastic solver and a cross-sectional structure solver capable of computing the beam properties of a blade.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Assembly</span><span class="p">,</span> <span class="n">Component</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">VarTree</span>

<span class="kn">from</span> <span class="nn">fusedwind.interface</span> <span class="kn">import</span> <span class="n">implement_base</span>
<span class="kn">from</span> <span class="nn">fusedwind.turbine.geometry</span> <span class="kn">import</span> <span class="n">read_blade_planform</span>
<span class="kn">from</span> <span class="nn">fusedwind.turbine.configurations</span> <span class="kn">import</span> <span class="n">configure_bladestructure</span>
<span class="kn">from</span> <span class="nn">fusedwind.turbine.blade_structure</span> <span class="kn">import</span> <span class="n">SplinedBladeStructure</span>
<span class="kn">from</span> <span class="nn">fusedwind.turbine.structure_vt</span> <span class="kn">import</span> <span class="n">BladeStructureVT3D</span><span class="p">,</span> <span class="n">BeamStructureVT</span>
<span class="kn">from</span> <span class="nn">fusedwind.turbine.turbine_vt</span> <span class="kn">import</span> <span class="n">AeroelasticHAWTVT</span><span class="p">,</span> <span class="n">configure_turbine</span>

<span class="kn">from</span> <span class="nn">fusedwind.turbine.aeroelastic_solver</span> <span class="kn">import</span> <span class="n">AeroElasticSolverBase</span>
<span class="kn">from</span> <span class="nn">fusedwind.turbine.structural_props_solver</span> <span class="kn">import</span> <span class="n">StructuralCSPropsSolver</span>


<span class="nd">@implement_base</span><span class="p">(</span><span class="n">AeroElasticSolverBase</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AEsolver</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="n">wt</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">AeroelasticHAWTVT</span><span class="p">(),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">print</span> <span class="s">&#39;&#39;</span>
        <span class="k">print</span> <span class="s">&#39;running aeroelastic analysis ...&#39;</span>


<span class="nd">@implement_base</span><span class="p">(</span><span class="n">StructuralCSPropsSolver</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CS2Dsolver</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="n">cs2d</span> <span class="o">=</span> <span class="n">List</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
    <span class="n">beam_structure</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">BeamStructureVT</span><span class="p">(),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">print</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">cs</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs2d</span><span class="p">):</span>
            <span class="k">print</span> <span class="s">&#39;processing cross section </span><span class="si">%i</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span>
</pre></div>
</div>
<p>Next, we define our blade geometry, both in terms of planform and lofted shape.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">top</span> <span class="o">=</span> <span class="n">Assembly</span><span class="p">()</span>

<span class="n">configure_bladestructure</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="s">&#39;data/DTU10MW&#39;</span><span class="p">,</span> <span class="n">planform_nC</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">structure_nC</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">top</span><span class="o">.</span><span class="n">st_writer</span><span class="o">.</span><span class="n">filebase</span> <span class="o">=</span> <span class="s">&#39;st_test&#39;</span>

<span class="n">top</span><span class="o">.</span><span class="n">blade_length</span> <span class="o">=</span> <span class="mf">86.366</span>

<span class="n">top</span><span class="o">.</span><span class="n">pf_splines</span><span class="o">.</span><span class="n">pfIn</span> <span class="o">=</span> <span class="n">read_blade_planform</span><span class="p">(</span><span class="s">&#39;data/DTU_10MW_RWT_blade_axis_prebend.dat&#39;</span><span class="p">)</span>
<span class="n">top</span><span class="o">.</span><span class="n">blade_surface</span><span class="o">.</span><span class="n">chord_ni</span> <span class="o">=</span> <span class="mi">300</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;data/ffaw3241.dat&#39;</span><span class="p">,</span>
          <span class="s">&#39;data/ffaw3301.dat&#39;</span><span class="p">,</span>
          <span class="s">&#39;data/ffaw3360.dat&#39;</span><span class="p">,</span>
          <span class="s">&#39;data/ffaw3480.dat&#39;</span><span class="p">,</span>
          <span class="s">&#39;data/tc72.dat&#39;</span><span class="p">,</span>
          <span class="s">&#39;data/cylinder.dat&#39;</span><span class="p">]:</span>

    <span class="n">top</span><span class="o">.</span><span class="n">blade_surface</span><span class="o">.</span><span class="n">base_airfoils</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

<span class="n">top</span><span class="o">.</span><span class="n">blade_surface</span><span class="o">.</span><span class="n">blend_var</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.241</span><span class="p">,</span> <span class="mf">0.301</span><span class="p">,</span> <span class="mf">0.36</span><span class="p">,</span> <span class="mf">0.48</span><span class="p">,</span> <span class="mf">0.72</span><span class="p">,</span> <span class="mf">1.</span><span class="p">])</span>

<span class="c"># spanwise distribution of planform spline DVs</span>
<span class="n">top</span><span class="o">.</span><span class="n">pf_splines</span><span class="o">.</span><span class="n">Cx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]</span>

<span class="c"># spanwise distribution of sptructural spline DVs</span>
<span class="n">top</span><span class="o">.</span><span class="n">st_splines</span><span class="o">.</span><span class="n">Cx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]</span>

<span class="c"># spanwise distribution of points where</span>
<span class="c"># cross-sectional structure vartrees will be created</span>
<span class="n">top</span><span class="o">.</span><span class="n">st_splines</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we add our two solvers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># add structural solver</span>
<span class="n">top</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;st&#39;</span><span class="p">,</span> <span class="n">CS2Dsolver</span><span class="p">())</span>
<span class="n">top</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;st&#39;</span><span class="p">)</span>


<span class="c"># add aeroelastic solver</span>
<span class="n">top</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;ae&#39;</span><span class="p">,</span> <span class="n">AEsolver</span><span class="p">())</span>
<span class="n">top</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;ae&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And configure the turbine:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># configure the turbine with standard sub-components</span>
<span class="n">configure_turbine</span><span class="p">(</span><span class="n">top</span><span class="o">.</span><span class="n">ae</span><span class="o">.</span><span class="n">wt</span><span class="p">)</span>

<span class="c"># define overall dimensions</span>
<span class="n">wt</span> <span class="o">=</span> <span class="n">top</span><span class="o">.</span><span class="n">ae</span><span class="o">.</span><span class="n">wt</span>
<span class="n">wt</span><span class="o">.</span><span class="n">turbine_name</span> <span class="o">=</span> <span class="s">&#39;DTU 10MW RWT&#39;</span>
<span class="n">wt</span><span class="o">.</span><span class="n">doc</span> <span class="o">=</span> <span class="s">&#39;FUSED-Wind definition of the DTU 10MW RWT&#39;</span>
<span class="n">wt</span><span class="o">.</span><span class="n">tower_height</span> <span class="o">=</span> <span class="mf">115.63</span>
<span class="n">wt</span><span class="o">.</span><span class="n">hub_height</span> <span class="o">=</span> <span class="mf">119.0</span>
<span class="n">wt</span><span class="o">.</span><span class="n">towertop_height</span> <span class="o">=</span> <span class="mf">2.75</span>
<span class="n">wt</span><span class="o">.</span><span class="n">shaft_length</span> <span class="o">=</span> <span class="mf">7.1</span>
<span class="n">wt</span><span class="o">.</span><span class="n">tilt_angle</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">wt</span><span class="o">.</span><span class="n">cone_angle</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.5</span>
<span class="n">wt</span><span class="o">.</span><span class="n">hub_radius</span> <span class="o">=</span> <span class="mf">2.8</span>
<span class="n">wt</span><span class="o">.</span><span class="n">blade_length</span> <span class="o">=</span> <span class="mf">86.366</span>
<span class="n">wt</span><span class="o">.</span><span class="n">rotor_diameter</span> <span class="o">=</span> <span class="mf">178.332</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">wt</span><span class="o">.</span><span class="n">set_machine_type</span><span class="p">(</span><span class="s">&#39;VarSpeedVarPitch&#39;</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">vIn</span> <span class="o">=</span> <span class="mf">3.</span>
<span class="n">c</span><span class="o">.</span><span class="n">vOut</span> <span class="o">=</span> <span class="mf">25.</span>
<span class="n">c</span><span class="o">.</span><span class="n">minOmega</span> <span class="o">=</span> <span class="mf">6.</span>
<span class="n">c</span><span class="o">.</span><span class="n">maxOmega</span> <span class="o">=</span> <span class="mf">9.6</span>
<span class="n">c</span><span class="o">.</span><span class="n">minPitch</span> <span class="o">=</span> <span class="mf">0.</span>
</pre></div>
</div>
<p>And finally make the necessary connections between, firstly, the structural geometry and the cross-sectional
solver, secondly, the planform splines and the aeroelastic solver, and finally the beam structural properties
computed by the structural solver with the blade beam properties used by the aeroelastic solver.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># connect the parameterized structure vartrees to the </span>
<span class="c"># structural solver</span>
<span class="n">top</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;st_builder.cs2d&#39;</span><span class="p">,</span> <span class="s">&#39;st.cs2d&#39;</span><span class="p">)</span>

<span class="c"># connect the splined planform to the blade geometry vartree</span>
<span class="c"># in the aeroelastic solver</span>
<span class="n">top</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;pf_splines.pfOut&#39;</span><span class="p">,</span> <span class="s">&#39;ae.wt.blade1.geom&#39;</span><span class="p">)</span>

<span class="c"># connect computed beam structure to input vartree in the</span>
<span class="c"># aeroelastic solver</span>
<span class="n">top</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;st.beam_structure&#39;</span><span class="p">,</span> <span class="s">&#39;ae.wt.blade1.beam_structure&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And lastly, we run the aero-structural analysis.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># run it</span>
<span class="n">top</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40451380-2', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>