<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>fusedwind.plant_flow.asym &mdash; FUSED-Wind  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootswatch-3.1.0/cerulean/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="FUSED-Wind  documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html">
          FUSED-Wind</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../../news.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about_fusedwind.html">Software Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">Source Documentation</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<div class="">
<h3>Versions</h3>

<div class="list-group">
  <a href="https://github.com/FUSED-Wind/fusedwind" target="_blank" class="list-group-item">
    <h4 class="list-group-item-heading">Development</h4>
    <p class="list-group-item-text" href="https://github.com/FUSED-Wind/fusedwind">0.1.dev Github</p>
  </a>
  <a href="../../../installation.html" target="_blank" class="list-group-item">
    <h4 class="list-group-item-heading">Stable</h4>
    <p class="list-group-item-text" href="https://github.com/FUSED-Wind/fusedwind">Coming soon!</p>
  </a>
</div>

</div>


<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<h3>Contents</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../news.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about_fusedwind.html">Software Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../documentation.html">Source Documentation</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9">
      
  <h1>Source code for fusedwind.plant_flow.asym</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">ndarray</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">loadtxt</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">zeros</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">arccos</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">nonzero</span><span class="p">,</span> \
    <span class="n">argsort</span><span class="p">,</span> <span class="n">NaN</span><span class="p">,</span> <span class="n">mean</span><span class="p">,</span> <span class="n">ones</span><span class="p">,</span> <span class="n">vstack</span><span class="p">,</span> <span class="n">linspace</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">arctan</span><span class="p">,</span> <span class="n">arange</span><span class="p">,</span> \
    <span class="n">pi</span><span class="p">,</span> <span class="n">sqrt</span><span class="p">,</span> <span class="n">dot</span>
<span class="kn">from</span> <span class="nn">numpy.linalg.linalg</span> <span class="kn">import</span> <span class="n">norm</span>

<span class="kn">from</span> <span class="nn">openmdao.lib.datatypes.api</span> <span class="kn">import</span> <span class="n">VarTree</span><span class="p">,</span> <span class="n">Float</span><span class="p">,</span> <span class="n">Slot</span><span class="p">,</span> <span class="n">Array</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Int</span><span class="p">,</span> <span class="n">Str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">openmdao.lib.drivers.api</span> <span class="kn">import</span> <span class="n">CaseIteratorDriver</span>
<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Driver</span>
<span class="kn">from</span> <span class="nn">openmdao.main.api</span> <span class="kn">import</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Assembly</span><span class="p">,</span> <span class="n">VariableTree</span><span class="p">,</span> <span class="n">Container</span>
<span class="kn">from</span> <span class="nn">openmdao.main.interfaces</span> <span class="kn">import</span> <span class="n">implements</span><span class="p">,</span> <span class="n">ICaseRecorder</span><span class="p">,</span> <span class="n">ICaseIterator</span>
<span class="kn">from</span> <span class="nn">openmdao.main.case</span> <span class="kn">import</span> <span class="n">Case</span>


<span class="kn">from</span> <span class="nn">vt</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">comp</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">fusedwind.interface</span> <span class="kn">import</span> <span class="n">base</span><span class="p">,</span> <span class="n">implement_base</span><span class="p">,</span> <span class="n">InterfaceSlot</span><span class="p">,</span> \
    <span class="n">FUSEDAssembly</span><span class="p">,</span> <span class="n">configure_base</span>

<span class="kn">from</span> <span class="nn">fusedwind.fused_helper</span> <span class="kn">import</span> <span class="n">fused_autodoc</span>

<span class="c"># ------------------------------------------------------------</span>
<span class="c"># Assembly Base Classes</span>


<span class="nd">@base</span>
<div class="viewcode-block" id="BaseAEPModel"><a class="viewcode-back" href="../../../plantflow.html#fusedwind.plant_flow.asym.BaseAEPModel">[docs]</a><span class="k">class</span> <span class="nc">BaseAEPModel</span><span class="p">(</span><span class="n">Assembly</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Most basic AEP class which only provides key AEP outputs - flexible for use with any energy production model</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># Outputs</span>
    <span class="n">gross_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Gross Annual Energy Production before availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">net_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Net Annual Energy Production after availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">capacity_factor</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Capacity factor for wind plant&#39;</span><span class="p">)</span>
</div>
<span class="nd">@implement_base</span><span class="p">(</span><span class="n">BaseAEPModel</span><span class="p">)</span>
<div class="viewcode-block" id="BaseAEPModel_NoFlow"><a class="viewcode-back" href="../../../plantflow.html#fusedwind.plant_flow.asym.BaseAEPModel_NoFlow">[docs]</a><span class="k">class</span> <span class="nc">BaseAEPModel_NoFlow</span><span class="p">(</span><span class="n">Assembly</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Basic AEP model that provides base outputs but also assumes no flow model is used so that loss factors and turbine number must be used to get full plant energy output</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># parameters</span>
    <span class="n">array_losses</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.059</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;energy losses due to turbine interactions - across entire plant&#39;</span><span class="p">)</span>
    <span class="n">other_losses</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;energy losses due to blade soiling, electrical, etc&#39;</span><span class="p">)</span>
    <span class="n">availability</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.94</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;average annual availbility of wind turbines at plant&#39;</span><span class="p">)</span>
    <span class="n">turbine_number</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;total number of wind turbines at the plant&#39;</span><span class="p">)</span>
    <span class="n">machine_rating</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">5000.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s">&#39;machine rating of turbine&#39;</span><span class="p">)</span>

    <span class="c"># Outputs</span>
    <span class="n">gross_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Gross Annual Energy Production before availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">net_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Net Annual Energy Production after availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">capacity_factor</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Capacity factor for wind plant&#39;</span><span class="p">)</span>

<span class="c"># -------------------------------------------------------------</span>
<span class="c"># Implementation Assemblies</span>

</div>
<span class="nd">@implement_base</span><span class="p">(</span><span class="n">BaseAEPModel</span><span class="p">)</span>
<div class="viewcode-block" id="AEPWindRose"><a class="viewcode-back" href="../../../plantflow.html#fusedwind.plant_flow.asym.AEPWindRose">[docs]</a><span class="k">class</span> <span class="nc">AEPWindRose</span><span class="p">(</span><span class="n">Assembly</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Base class to calculate Annual Energy Production (AEP) of a wind farm.</span>
<span class="sd">    Implement the same interface as `BaseAEPModel`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wf</span> <span class="o">=</span> <span class="n">InterfaceSlot</span><span class="p">(</span><span class="n">GenericWindFarm</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;A wind farm assembly or component&#39;</span><span class="p">)</span>
    <span class="n">postprocess_wind_rose</span> <span class="o">=</span> <span class="n">InterfaceSlot</span><span class="p">(</span><span class="n">GenericPostProcessWindRose</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The component taking care of postprocessing the wind rose&#39;</span><span class="p">)</span>
    <span class="n">case_gen</span> <span class="o">=</span> <span class="n">InterfaceSlot</span><span class="p">(</span><span class="n">GenericWindRoseCaseGenerator</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Generate the cases from the inputs&#39;</span><span class="p">)</span>

    <span class="c"># Inputs</span>
    <span class="n">wind_speeds</span> <span class="o">=</span> <span class="n">List</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m/s&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The different wind speeds to run [nWS]&#39;</span><span class="p">)</span>
    <span class="n">wind_directions</span> <span class="o">=</span> <span class="n">List</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;deg&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The different wind directions to run [nWD]&#39;</span><span class="p">)</span>

    <span class="c"># Outputs</span>
    <span class="n">array_aep</span> <span class="o">=</span> <span class="n">Array</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The energy production per sector [nWD, nWS]&#39;</span><span class="p">)</span>
    <span class="n">gross_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Gross Annual Energy Production before availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">net_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Net Annual Energy Production after availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">capacity_factor</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Capacity factor for wind plant&#39;</span><span class="p">)</span>

    <span class="c"># def configure(self):</span>
    <span class="c">#    configure_AEPWindRose(self)</span>

</div>
<span class="nd">@configure_base</span><span class="p">(</span><span class="n">AEPWindRose</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">configure_AEPWindRose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generic configure method for AEPSingleWindRose and AEPMultipleWindRoses.</span>
<span class="sd">    After this configure method is called, some connections are hanging loose:</span>
<span class="sd">        - if wind_rose_type == &#39;single&#39;:</span>
<span class="sd">            - case_gen.wind_rose</span>
<span class="sd">        - if wind_rose_type == &#39;multiple&#39;:</span>
<span class="sd">            - case_gen.wt_layout</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    ### In a single wind rose case:</span>
<span class="sd">            def configure(self):</span>
<span class="sd">            self.add(&#39;case_gen&#39;, SingleWindRoseCaseGenerator())</span>
<span class="sd">            self.add(&#39;postprocess_wind_rose&#39;, PostProcessSingleWindRose())</span>
<span class="sd">            configure_AEPWindRose(self)</span>
<span class="sd">            self.connect(&#39;wind_rose&#39;, &#39;case_gen.wind_rose&#39;)</span>

<span class="sd">    ### In a multiple wind rose case:</span>
<span class="sd">        def configure(self):</span>
<span class="sd">            self.add(&#39;case_gen&#39;, MultipleWindRosesCaseGenerator())</span>
<span class="sd">            self.add(&#39;postprocess_wind_rose&#39;, PostProcessMultipleWindRoses())</span>
<span class="sd">            configure_AEPWindRose(self)</span>
<span class="sd">            self.connect(&#39;wt_layout&#39;, &#39;case_gen.wt_layout&#39;)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># Adding</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;driver&#39;</span><span class="p">,</span> <span class="n">Driver</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;wind_rose_driver&#39;</span><span class="p">,</span> <span class="n">CaseIteratorDriver</span><span class="p">())</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_default</span><span class="p">(</span><span class="s">&#39;wf&#39;</span><span class="p">,</span> <span class="n">GenericWindFarm</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_default</span><span class="p">(</span><span class="s">&#39;case_gen&#39;</span><span class="p">,</span> <span class="n">GenericWindRoseCaseGenerator</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_default</span><span class="p">(</span><span class="s">&#39;postprocess_wind_rose&#39;</span><span class="p">,</span> <span class="n">GenericPostProcessWindRose</span><span class="p">())</span>

    <span class="c"># Drivers configuration</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wind_rose_driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;wf&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wind_rose_driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;wf.wind_speed&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wind_rose_driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&#39;wf.wind_direction&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wind_rose_driver</span><span class="o">.</span><span class="n">add_responses</span><span class="p">([</span><span class="s">&#39;wf.power&#39;</span><span class="p">,</span> <span class="s">&#39;wf.wt_power&#39;</span><span class="p">,</span>
                                         <span class="s">&#39;wf.wt_thrust&#39;</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">workflow</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&#39;case_gen&#39;</span><span class="p">,</span> <span class="s">&#39;wind_rose_driver&#39;</span><span class="p">,</span>
                              <span class="s">&#39;postprocess_wind_rose&#39;</span><span class="p">])</span>

    <span class="c"># wiring</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;wind_speeds&#39;</span><span class="p">,</span> <span class="p">[</span>
                 <span class="s">&#39;case_gen.wind_speeds&#39;</span><span class="p">,</span>
                 <span class="s">&#39;postprocess_wind_rose.wind_speeds&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;wind_directions&#39;</span><span class="p">,</span> <span class="p">[</span>
                 <span class="s">&#39;case_gen.wind_directions&#39;</span><span class="p">,</span>
                 <span class="s">&#39;postprocess_wind_rose.wind_directions&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;case_gen.all_wind_speeds&#39;</span><span class="p">,</span>
                 <span class="s">&#39;wind_rose_driver.case_inputs.wf.wind_speed&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;case_gen.all_wind_directions&#39;</span><span class="p">,</span>
                 <span class="s">&#39;wind_rose_driver.case_inputs.wf.wind_direction&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;case_gen.all_frequencies&#39;</span><span class="p">,</span>
                 <span class="s">&#39;postprocess_wind_rose.frequencies&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;wind_rose_driver.case_outputs.wf.power&#39;</span><span class="p">,</span>
                 <span class="s">&#39;postprocess_wind_rose.powers&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;postprocess_wind_rose.net_aep&#39;</span><span class="p">,</span> <span class="s">&#39;net_aep&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;postprocess_wind_rose.array_aep&#39;</span><span class="p">,</span> <span class="s">&#39;array_aep&#39;</span><span class="p">)</span>


<span class="nd">@implement_base</span><span class="p">(</span><span class="n">BaseAEPModel</span><span class="p">,</span> <span class="n">AEPWindRose</span><span class="p">)</span>
<div class="viewcode-block" id="AEPSingleWindRose"><a class="viewcode-back" href="../../../plantflow.html#fusedwind.plant_flow.asym.AEPSingleWindRose">[docs]</a><span class="k">class</span> <span class="nc">AEPSingleWindRose</span><span class="p">(</span><span class="n">FUSEDAssembly</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Base class to calculate Annual Energy Production (AEP) of a wind farm.</span>
<span class="sd">    Implement the same interface as `BaseAEPModel`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wf</span> <span class="o">=</span> <span class="n">InterfaceSlot</span><span class="p">(</span><span class="n">GenericWindFarm</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;A wind farm assembly or component&#39;</span><span class="p">)</span>
    <span class="n">postprocess_wind_rose</span> <span class="o">=</span> <span class="n">InterfaceSlot</span><span class="p">(</span><span class="n">GenericPostProcessWindRose</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The component taking care of postprocessing the wind rose&#39;</span><span class="p">)</span>
    <span class="n">case_gen</span> <span class="o">=</span> <span class="n">InterfaceSlot</span><span class="p">(</span><span class="n">GenericWindRoseCaseGenerator</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Generate the cases from the inputs&#39;</span><span class="p">)</span>

    <span class="c"># Inputs</span>
    <span class="n">wind_speeds</span> <span class="o">=</span> <span class="n">List</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m/s&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The different wind speeds to run [nWS]&#39;</span><span class="p">)</span>
    <span class="n">wind_directions</span> <span class="o">=</span> <span class="n">List</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;deg&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The different wind directions to run [nWD]&#39;</span><span class="p">)</span>
    <span class="n">wind_rose</span> <span class="o">=</span> <span class="n">Array</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Probability distribution of wind speed, wind direction [nWD, nWS]&#39;</span><span class="p">)</span>

    <span class="c"># Outputs</span>
    <span class="n">array_aep</span> <span class="o">=</span> <span class="n">Array</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The energy production per sector [nWD, nWS]&#39;</span><span class="p">)</span>
    <span class="n">gross_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Gross Annual Energy Production before availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">net_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Net Annual Energy Production after availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">capacity_factor</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Capacity factor for wind plant&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;case_gen&#39;</span><span class="p">,</span> <span class="n">SingleWindRoseCaseGenerator</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;postprocess_wind_rose&#39;</span><span class="p">,</span> <span class="n">PostProcessSingleWindRose</span><span class="p">())</span>
        <span class="n">configure_AEPWindRose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;wind_rose&#39;</span><span class="p">,</span> <span class="s">&#39;case_gen.wind_rose&#39;</span><span class="p">)</span>



</div>
<span class="nd">@implement_base</span><span class="p">(</span><span class="n">BaseAEPModel</span><span class="p">,</span> <span class="n">AEPWindRose</span><span class="p">)</span>
<div class="viewcode-block" id="AEPMultipleWindRoses"><a class="viewcode-back" href="../../../plantflow.html#fusedwind.plant_flow.asym.AEPMultipleWindRoses">[docs]</a><span class="k">class</span> <span class="nc">AEPMultipleWindRoses</span><span class="p">(</span><span class="n">FUSEDAssembly</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Base class to calculate Annual Energy Production (AEP) of a wind farm.</span>
<span class="sd">    Implement the same interface as `BaseAEPModel` and `AEPWindRose`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wf</span> <span class="o">=</span> <span class="n">InterfaceSlot</span><span class="p">(</span><span class="n">GenericWindFarm</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;A wind farm assembly or component&#39;</span><span class="p">)</span>
    <span class="n">postprocess_wind_rose</span> <span class="o">=</span> <span class="n">InterfaceSlot</span><span class="p">(</span><span class="n">GenericPostProcessWindRose</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The component taking care of postprocessing the wind rose&#39;</span><span class="p">)</span>
    <span class="n">case_gen</span> <span class="o">=</span> <span class="n">InterfaceSlot</span><span class="p">(</span><span class="n">GenericWindRoseCaseGenerator</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Generate the cases from the inputs&#39;</span><span class="p">)</span>

    <span class="c"># Inputs</span>
    <span class="n">wind_speeds</span> <span class="o">=</span> <span class="n">List</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;m/s&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The different wind speeds to run [nWS]&#39;</span><span class="p">)</span>
    <span class="n">wind_directions</span> <span class="o">=</span> <span class="n">List</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;deg&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The different wind directions to run [nWD]&#39;</span><span class="p">)</span>
    <span class="n">wt_layout</span> <span class="o">=</span> <span class="n">VarTree</span><span class="p">(</span><span class="n">GenericWindFarmTurbineLayout</span><span class="p">(),</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;wind turbine properties and layout&#39;</span><span class="p">)</span>

    <span class="c"># Outputs</span>
    <span class="n">array_aep</span> <span class="o">=</span> <span class="n">Array</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The energy production per sector [nWD, nWS]&#39;</span><span class="p">)</span>
    <span class="n">gross_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Gross Annual Energy Production before availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">net_aep</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Net Annual Energy Production after availability and loss impacts&#39;</span><span class="p">)</span>
    <span class="n">capacity_factor</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;Capacity factor for wind plant&#39;</span><span class="p">)</span>
    <span class="n">wt_aep</span> <span class="o">=</span> <span class="n">Array</span><span class="p">([],</span> <span class="n">iotype</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s">&#39;kW*h&#39;</span><span class="p">,</span>
        <span class="n">desc</span><span class="o">=</span><span class="s">&#39;The energy production per turbine [nWT]&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;case_gen&#39;</span><span class="p">,</span> <span class="n">MultipleWindRosesCaseGenerator</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;postprocess_wind_rose&#39;</span><span class="p">,</span> <span class="n">PostProcessMultipleWindRoses</span><span class="p">())</span>
        <span class="n">configure_AEPWindRose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;wt_layout&#39;</span><span class="p">,</span> <span class="s">&#39;case_gen.wt_layout&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="s">&#39;wind_rose_driver.case_outputs.wf.power&#39;</span><span class="p">,</span>
                     <span class="s">&#39;postprocess_wind_rose.powers&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;wind_rose_driver.case_outputs.wf.wt_power&#39;</span><span class="p">,</span>
                     <span class="s">&#39;postprocess_wind_rose.powers&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;postprocess_wind_rose.wt_aep&#39;</span><span class="p">,</span> <span class="s">&#39;wt_aep&#39;</span><span class="p">)</span>
</pre></div></div>

    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40451380-2', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>